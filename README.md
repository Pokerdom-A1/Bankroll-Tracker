# –ë–∞–Ω–∫—Ä–æ–ª–ª-—Ç—Ä–µ–∫–µ—Ä –¥–ª—è Pokerdom

–û–¥–Ω–æ—Ñ–∞–π–ª–æ–≤—ã–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –±–∞–Ω–∫—Ä–æ–ª–ª-—Ç—Ä–µ–∫–µ—Ä –¥–ª—è Pokerdom: –∏–º–ø–æ—Ä—Ç –∫—ç—à-—Å–µ—Å—Å–∏–π –∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤ (CSV/XLSX), —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite, —Ä–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ (ROI, ITM, winrate bb/100), —É—á—ë—Ç –¥–µ–ø–æ–∑–∏—Ç–æ–≤/–≤—ã–≤–æ–¥–æ–≤, –∫—ç—à–±–µ–∫ –ø–æ —É—Ä–æ–≤–Ω—è–º, –≥—Ä–∞—Ñ–∏–∫–∏, —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤.

---

## ‚ö°Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* üì• –ò–º–ø–æ—Ä—Ç **cash** –∏ **MTT** –∏–∑ CSV / XLSX (—Å –∞–≤—Ç–æ-–º–∞–ø–ø–∏–Ω–≥–æ–º –∫–æ–ª–æ–Ω–æ–∫ –∏ `--dry-run`).
* üíæ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ **SQLite** (–æ–¥–∏–Ω —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ).
* üìä –ú–µ—Ç—Ä–∏–∫–∏:

  * Cash: **–ø—Ä–æ—Ñ–∏—Ç**, **winrate (bb/100)**, —Ä–µ–π–∫, —Ä—É–∫–∏.
  * MTT: **ROI**, **ITM%**, –ø—Ä–æ—Ñ–∏—Ç, –ø—Ä–∏–∑—ã/–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏.
* üßÆ –£—á—ë—Ç –±–∞–Ω–∫—Ä–æ–ª–ª–∞: –¥–µ–ø–æ–∑–∏—Ç—ã, –≤—ã–≤–æ–¥—ã, –±–æ–Ω—É—Å—ã, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏.
* üí∏ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–π **–∫—ç—à–±–µ–∫** –ø–æ —É—Ä–æ–≤–Ω—è–º.
* üìà –ì—Ä–∞—Ñ–∏–∫–∏ (PNG): –∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ñ–∏—Ç, –∫—Ä–∏–≤–∞—è –±–∞–Ω–∫—Ä–æ–ª–ª–∞, winrate –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º, ROI –ø–æ –º–µ—Å—è—Ü–∞–º.
* üì§ –≠–∫—Å–ø–æ—Ä—Ç: CSV/JSON + `summary.json`.
* üß∞ –ì–∏–±–∫–∏–π `--map` –¥–ª—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –≤—ã–≥—Ä—É–∑–æ–∫, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è RU/EN, –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏.

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

* –û–¥–∏–Ω —Ñ–∞–π–ª: `pokerdom.py`.
* –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `.pokerdom_tracker.sqlite` (–≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è).
* –¢–∞–±–ª–∏—Ü—ã: `cash_sessions`, `tournaments`, `bankroll_tx`, `imports`, `config`.

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **Python 3.10+**.
2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/Pokerdom-A1/Bankroll-Tracker.git
cd Bankroll-Tracker
```

3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) —Å–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
python -m venv .venv
# Windows:
.venv\Scripts\activate
# macOS/Linux:
source .venv/bin/activate
```

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –≥—Ä–∞—Ñ–∏–∫–∏/—á—Ç–µ–Ω–∏–µ XLSX:

```bash
pip install matplotlib openpyxl
```

> –°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç **–±–µ–∑** —ç—Ç–∏—Ö –ø–∞–∫–µ—Ç–æ–≤; –ø—Ä–æ—Å—Ç–æ –±—É–¥—É—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏—á–∏.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ë–î –∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:

```bash
python pokerdom.py init
```

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫—ç—à-—Å–µ—Å—Å–∏–∏:

```bash
python pokerdom.py import-cash --file data/cash.csv --room Pokerdom --currency RUB
```

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ç—É—Ä–Ω–∏—Ä—ã:

```bash
python pokerdom.py import-mtt --file data/mtt.csv --room Pokerdom --currency RUB
```

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–≤–æ–¥–∫—É:

```bash
python pokerdom.py stats --room Pokerdom --currency RUB
```

–°–¥–µ–ª–∞–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫ –∫—É–º—É–ª—è—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏—Ç–∞:

```bash
python pokerdom.py graph --type profit_cum --out out/
```

---

## üìö –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### Cash ‚Äî CSV (–º–∏–Ω–∏–º—É–º)

```csv
date,stakes_bb,hands,buyin,cashout,currency,rake,notes
2025-09-01,5,860,3000,3250,RUB,120,"NL10 Fast"
```

### MTT ‚Äî CSV (–º–∏–Ω–∏–º—É–º)

```csv
date,buyin,fee,prize,position,field_size,currency,rake,notes
2025-09-01,900,100,0,312,1200,RUB,100,"PKO Turbo"
2025-09-02,1800,200,10000,1,950,RUB,200,"Sunday Main"
```

> –ï—Å–ª–∏ `buyin` —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç `fee`, –ø–æ–ª–µ `fee` –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º ‚Äî —Å–∫—Ä–∏–ø—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Å–∞–º.

### XLSX

* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `openpyxl`.
* –ß–∏—Ç–∞–µ—Ç—Å—è **–∞–∫—Ç–∏–≤–Ω—ã–π –ª–∏—Å—Ç**, –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏.

---

## üîÄ –ú–∞–ø–ø–∏–Ω–≥ –∫–æ–ª–æ–Ω–æ–∫ (`--map`)

–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏ —á–µ—Ä–µ–∑ JSON:

```bash
python pokerdom.py import-cash --file cash_ru.csv \
  --map '{"date":"–î–∞—Ç–∞","stakes_bb":"–ë–ª–∞–π–Ω–¥","hands":"–†—É–∫–∏","buyin":"–í—Ö–æ–¥","cashout":"–í—ã—Ö–æ–¥","rake":"–†–µ–π–∫","currency":"–í–∞–ª—é—Ç–∞"}'
```

–°–∫—Ä–∏–ø—Ç –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (RU/EN —Å–∏–Ω–æ–Ω–∏–º—ã). `--map` –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.

---

## üßæ –ö–æ–º–∞–Ω–¥—ã CLI

```
python pokerdom.py <command> [OPTIONS]
```

### –ë–∞–∑–∞

* `init` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ë–î –∏ –∫–æ–Ω—Ñ–∏–≥.

### –ò–º–ø–æ—Ä—Ç

* `import-cash --file PATH [--map JSON] [--room Pokerdom] [--currency RUB] [--dry-run]`
* `import-mtt  --file PATH [--map JSON] [--room Pokerdom] [--currency RUB] [--dry-run]`

### –†—É—á–Ω–æ–π –≤–≤–æ–¥

* `add-cash --date YYYY-MM-DD --stakes-bb F --hands N --buyin F --cashout F [--currency RUB] [--rake F] [--notes ""] [--room Pokerdom]`
* `add-mtt  --date YYYY-MM-DD --buyin F --prize F [--fee F] [--position N] [--field-size N] [--currency RUB] [--rake F] [--notes ""] [--room Pokerdom]`
* `add-tx   --date YYYY-MM-DD --amount F --type {deposit,withdraw,bonus,adjustment} [--currency RUB] [--notes ""]`

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏

* `stats [--from YYYY-MM-DD] [--to YYYY-MM-DD] [--room Pokerdom] [--currency RUB]`
* `graph --type {profit_cum,bankroll,cash_winrate,mtt_roi} --out DIR [--group {day,month}]`

### –≠–∫—Å–ø–æ—Ä—Ç

* `export --what {cash,mtt,tx,all} --format {csv,json} --out DIR`

### –ü—Ä–æ–≥–Ω–æ–∑

* `forecast --target 100000 [--from YYYY-MM-DD] [--to YYYY-MM-DD]`

### –ö—ç—à–±–µ–∫

* `rakeback [--from YYYY-MM-DD] [--to YYYY-MM-DD]`

### –ö–æ–Ω—Ñ–∏–≥

* `config [--set key=value]... [--get key]`

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏:

* `--db PATH` ‚Äî –ø—É—Ç—å –∫ –±–∞–∑–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `.pokerdom_tracker.sqlite`)
* `-v/--verbose` ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Ñ–æ—Ä–º—É–ª—ã

**Cash**

* –ü—Ä–æ—Ñ–∏—Ç: `cashout - buyin`
* Winrate (bb/100): –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤—Å–µ–º —Å–µ—Å—Å–∏—è–º —Å —É—á—ë—Ç–æ–º —Ä—É–∫ –∏ –±–ª–∞–π–Ω–¥–∞.
* –†–µ–π–∫/100 —Ä—É–∫: `(sum(rake) / sum(hands)) * 100`

**MTT**

* ROI: `(sum(prize) - sum(buyin + fee)) / sum(buyin + fee)`
* ITM%: `count(prize>0)/count(all)*100`

**–ë–∞–Ω–∫—Ä–æ–ª–ª**

* `–¥–µ–ø–æ–∑–∏—Ç—ã/–≤—ã–≤–æ–¥—ã/–±–æ–Ω—É—Å—ã/–∫–æ—Ä—Ä–µ–∫—Ü–∏–∏` + –ø—Ä–æ—Ñ–∏—Ç –∏–∑ Cash + MTT (—Å —É—á—ë—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤).

---

## üí∏ –ö—ç—à–±–µ–∫ (–∫–æ–Ω—Ñ–∏–≥)

–ü—Ä–∏–º–µ—Ä —É—Ä–æ–≤–Ω–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

```json
{
  "rakeback": {
    "currency": "RUB",
    "tiers": [
      {"min_rake": 0,     "rate": 0.02},
      {"min_rake": 5000,  "rate": 0.04},
      {"min_rake": 20000, "rate": 0.06},
      {"min_rake": 50000, "rate": 0.08}
    ],
    "reset_period": "weekly"
  }
}
```

–ò–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CLI:

```bash
python pokerdom.py config --set rakeback='{"currency":"RUB","tiers":[{"min_rake":0,"rate":0.03}]}'
```

---

## üåç –í–∞–ª—é—Ç—ã

* –£ –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ –µ—Å—Ç—å –ø–æ–ª–µ `currency`.
* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—á–∏—Ç–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ **–æ–¥–Ω–æ–π** –≤–∞–ª—é—Ç—ã (`--currency`).
* –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ `config --set rates='{"USD->RUB":98.5,"EUR->RUB":105}'` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

```bash
# 1) –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
python pokerdom.py init

# 2) –ò–º–ø–æ—Ä—Ç –∫—ç—à–∞ (–ø—Ä–æ–≥–æ–Ω –±–µ–∑ –∑–∞–ø–∏—Å–∏)
python pokerdom.py import-cash --file samples/cash.csv --dry-run

# 3) –ò–º–ø–æ—Ä—Ç —Ç—É—Ä–Ω–∏—Ä–æ–≤
python pokerdom.py import-mtt --file samples/mtt.xlsx

# 4) –î–µ–ø–æ–∑–∏—Ç + —Å–≤–æ–¥–∫–∞
python pokerdom.py add-tx --date 2025-09-01 --amount 10000 --type deposit
python pokerdom.py stats --currency RUB

# 5) –ì—Ä–∞—Ñ–∏–∫–∏
python pokerdom.py graph --type bankroll --out out/
python pokerdom.py graph --type cash_winrate --group month --out out/

# 6) –ö—ç—à–±–µ–∫ –∑–∞ –Ω–µ–¥–µ–ª—é
python pokerdom.py rakeback --from 2025-09-01 --to 2025-09-07

# 7) –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–≥–æ
python pokerdom.py export --what all --format csv --out export/
```

---

## üß© –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
Bankroll-Tracker/
‚îú‚îÄ pokerdom.py
‚îú‚îÄ README.md
‚îú‚îÄ samples/
‚îÇ  ‚îú‚îÄ cash.csv
‚îÇ  ‚îî‚îÄ mtt.xlsx
‚îú‚îÄ out/                # –≥—Ä–∞—Ñ–∏–∫–∏ (gitignore)
‚îú‚îÄ export/             # —ç–∫—Å–ø–æ—Ä—Ç (gitignore)
‚îî‚îÄ .gitignore
```

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π `.gitignore`:

```
.pokerdom_tracker.sqlite
out/
export/
*.png
*.log
.venv/
__pycache__/
```

---

## üîê –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –ª–µ–≥–∞–ª—å–Ω–æ—Å—Ç—å

* –°–∫—Ä–∏–ø—Ç **–Ω–µ** –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –∫–ª–∏–µ–Ω—Ç–æ–º –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–º Pokerdom, –Ω–µ –∫–ª–∏–∫–∞–µ—Ç –∏ –Ω–µ –∏–≥—Ä–∞–µ—Ç –∑–∞ –≤–∞—Å.
* –†–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ** —Å –≤–∞—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ –≤—ã–≥—Ä—É–∑–æ–∫/CSV/XLSX –∏–ª–∏ —Ä—É—á–Ω—ã–º –≤–≤–æ–¥–æ–º.
* –°–æ–±–ª—é–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –ø–æ–∫–µ—Ä-—Ä—É–º–∞.

---

## üß∞ –û—Ç–ª–∞–¥–∫–∞ –∏ —á–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

* **`openpyxl` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ Excel –∫–∞–∫ CSV –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç: `pip install openpyxl`.
* **–ù–µ—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `matplotlib`: `pip install matplotlib`.
* **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π CSV** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ UTF-8/UTF-8-SIG.
* **–î—É–±–ª–∏–∫–∞—Ç—ã –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ** ‚Äî –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è; –ø—Ä–∏ —Å–æ–º–Ω–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--dry-run`.
* **–õ–æ–≥–∏ –≤ —Ñ–∞–π–ª** ‚Äî `python pokerdom.py config --set log_file=".pokerdom_tracker.log"`

---

## ü§ù –í–∫–ª–∞–¥

PR –∏ issue –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è.
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–±–ª—é–¥–∞–π—Ç–µ —Å—Ç–∏–ª—å –∫–æ–¥–∞ (PEP 8) –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤ `samples/`.
